## 什么是委托？

把方法当作参数传递，就要用到委托

委托是一个类型，这个类型可以赋值一个方法的引用

格式：

~~~Csharp
delegate 返回值类型 委托名(参数类型 参数,...); 
~~~

~~~Csharp
        delegate void IntMethodInvoker(int x);//定义了一个委托
        private static void Test(int x)//定义一个静态方法
        {
	        Console.WriteLine("我是Test方法：" + x);
        }

        static void Main(string[] args)
        {
            IntMethodInvoker invoker = null;//表示委托没有引用任何方法
            invoker = Test;//委托引用静态方法Test
            invoker(100);//就相当于调用了Test
        }
~~~

~~~Csharp
        delegate String GetAString();
        static void Main(string[] args)
        {
            int x = 1234;
            GetAString getAString = new GetAString(x.ToString);//GetAString getAString = x.ToString;
            Console.WriteLine(getAString());
        }
~~~

## 委托类型的数组

事先在类MathOp中写好两个方法，分别是加倍和平方

~~~Csharp
        static void Main(string[] args)
        {

            DoubleOpDelegate[] operations = { MathOp.MultiplyByTwo, MathOp.Square };//声明委托类型的数组传入两个方法
            foreach (DoubleOpDelegate op in operations)//遍历数组循环调用两个方法，分别输出6和9 
            {
                Console.WriteLine(op(3));
            }
        }


        delegate double DoubleOpDelegate(double value);
~~~

## Action

系统自带的委托类型

只能指向没有返回值的方法

Action<参数类型1,...> 委托名 = 方法名;

~~~Csharp
//不传入参数
        static void Main(string[] args)
        {

            Action method = Test1;
            method();
        }

        public static void Test1()
        {
            Console.WriteLine("Test1");
        }
//输出 Test1
~~~

~~~Csharp
//传入1个参数
        static void Main(string[] args)
        {

            Action<int> method2 = Test2;
            method2(1);
        }

        public static void Test2(int x)
        {
            Console.WriteLine("Test2" + x);
        }
//输出 Test21
~~~

~~~Csharp
//传入两个参数
        static void Main(string[] args)
        {

            Action<int,string> method3 = Test3;
            method3(1,"鱼花楼");
        }

        public static void Test3(int x,string s)
        {
            Console.WriteLine("Test3" + x + s);
        }
//输出 Test31鱼花楼
~~~

## Func

系统自带的委托类型

只能指向有返回值的方法

Func<参数类型1,参数类型2,...返回值类型> 委托名 = 方法名;

~~~Csharp
        static void Main(string[] args)
        {

            //无参数传入
            Func<String> f = Test1;
            Console.WriteLine(f());//输出 siki

            //有参数传入
            Func<int, double, string> f2 = Test2;
            Console.WriteLine(f2(1,2.0));//输出 siki12
        }

        public static string Test1()
        {
            return "siki";
        }
        public static string Test2(int x,double y)
        {
            return "siki" + x + y;
        }
~~~

